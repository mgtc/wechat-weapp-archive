<import src="../common/foot.wxml" />

<view class="container">
  <view class="profile-box">
    <view class="profile">
      <text class="uname">{{inputName}}</text>
      <image
        class="sex-img"
        src="/static/info/{{sex=='ç”·'?'male.png':'female.png'}}" />
      <text class="sex">{{sex}}</text>
    </view>
    <view class="bazi">
      <view class="bazi-row-item">
         <text>å…¬å†</text>
         <text>å…«å­—</text>
      </view>
      <view class="vertical-line"></view>
      <view class="bazi-row-item">
        <text>{{yy.time}}å¹´</text>
        <text>{{yy.bazi}}</text>
      </view>
      <view class="bazi-row-item">
        <text>{{mm.time}}æœˆ</text>
        <text>{{mm.bazi}}</text>
      </view>
      <view class="bazi-row-item">
        <text>{{dd.time}}æ—¥</text>
        <text>{{dd.bazi}}</text>
      </view>
      <view class="bazi-row-item">
        <text>{{hh.time}}æ—¶</text>
        <text>{{hh.bazi}}</text>
      </view>
    </view>
  </view>
  <view class="canvas-box">
    <view class="canvas-title">
      <image
        class="calendar-img"
        src="/static/info/calendar.png" />
      <text class="calendar-title">2018æ¯æœˆè¿åŠ¿</text>
    </view>
    <canvas
      canvas-id="score-chart"
      style="margin: 0 auto; width: 610rpx; height: 400rpx;">
    </canvas>
  </view>

  <view class="basic-content-box report-box" wx:if="{{state===1}}">
    <view class="element-chart-box">
      <view class="category-title-box">
        <text class="category-title">äº”è¡ŒåŠ›é‡</text>
      </view>
      <canvas
        canvas-id="element-chart"
        style="margin: 0 auto; width: 610rpx; height: 500rpx;">
      </canvas>
    </view>
    <view class="category-box">
      <view class="category-title-box">
        <text class="category-title">å…ˆå¤©æ€§æ ¼æ¦‚è¿°</text>
      </view>
      <view class="char-item-box char-sum">
        <text class="char-text">{{charDesc.sum}}</text>
      </view>
      <view class="char-item-box char-item">
        <text class="char-text">ã€Œ{{charDesc.type}}ã€äº‹ä¸š:</text>
        <text class="char-text item-content">{{charDesc.career}}</text>
      </view>
      <view class="char-item-box char-item">
        <text class="char-text">ã€Œ{{charDesc.type}}ã€å‹æƒ…:</text>
        <text class="char-text item-content">{{charDesc.friend}}</text>
      </view>
      <view class="char-item-box char-item">
        <text class="char-text">ã€Œ{{charDesc.type}}ã€çˆ±æƒ…:</text>
        <text class="char-text item-content">{{charDesc.love}}</text>
      </view>
      <view class="idol-wrapper">
        <view class="category-title-box">
          <text class="category-title char-item">ä»£è¡¨äººç‰©</text>
        </view>
        <view class="idol-img-box">
          <view class="idol" wx:for="{{idol}}" wx:key="*this">
            <view><image class="idol-img" src="{{item.url}}" /></view>
            <text class="char-item char-text">{{item.name}}</text>
          </view>
        </view>
      </view>
    </view>
    <view class="category-box">
      <view class="category-title-box">
        <text class="category-title">äº”è¡Œå–œå¥½</text>
      </view>
      <view class="ele-like-box">
        <view class="ele-like-row">
          <view class="ele-like-item">
            <view class="ele-text char-text">æ–¹ä½</view>
            <view class="ele-text char-text">{{eleLike.direction}}</view>
          </view>
          <view class="ele-vertical-line"></view>
          <view class="ele-like-item">
            <view class="ele-text char-text">æ•°å­—</view>
            <view class="ele-text char-text">{{eleLike.number}}</view>
          </view>
        </view>
        <view class="ele-like-row">
          <view class="ele-like-item">
            <view class="ele-text char-text">é¢œè‰²</view>
            <view class="ele-text char-text">{{colors[eleLike.color]}}</view>
            <view class="ele-text color-box {{eleLike.color}}"></view>
          </view>
          <view class="ele-vertical-line"></view>
          <view class="ele-like-item">
            <view class="ele-text char-text">å…ƒç´ </view>
            <view class="ele-text char-text">{{eleLike.ele}}</view>
            <view class="ele-text">{{emoji[eleLike.ele]}}</view>
          </view>
        </view>
      </view>
    </view>
    <view class="category-box">
      <view class="category-title-box">
        <text class="category-title">æˆŒç‹—å¹´æ€»è¯„</text>
      </view>
      <view class="year-desc-box">
        <view class="year-desc-line" wx:for="{{yearDesc}}" wx:key="*this">
          {{item}}
        </view>
      </view>
    </view>
    <view class="category-box">
      <view class="category-title-box">
        <text class="category-title">æµæœˆè¿åŠ¿</text>
      </view>
      <view class="month-wrapper">
        <view class="month-box" wx:for="{{monthDesc}}" wx:key="*this">
          <view class="month-box-title month-title-text">
            <view class="char-text" style="font-weight:bold;">ã€Œ{{months[item.index].tgdz}}ã€</view>
            <view class="char-text" style="font-weight:bold; margin-left: -15rpx;">æœˆ</view>
            <view class="month-text" style="margin-left: 30rpx;">{{months[item.index].duration}}</view>
          </view>
          <view class="label-box">
            <view class="label-item">
              <view class="label-title">å®œ</view>
              <view class="ele-vertical-line" style="margin-right:35rpx"></view>
              <view class="label-tag" wx:for="{{item.label.good}}">
                {{item}}
              </view>
            </view>
            <view class="label-item">
              <view class="label-title">å¿Œ</view>
              <view class="ele-vertical-line" style="margin-right:35rpx"></view>
              <view class="label-tag" wx:for="{{item.label.bad}}">
                {{item}}
              </view>
              </view>
          </view>
          <view class="month-star">
            <view class="month-title-text">æœ¬æœˆè¿åŠ¿:</view>
            <view class="star-box" wx:for="{{item.score}}">ğŸŒŸ</view>
            <view
              class="score-box {{score[item.index]>=70?'red-text':(score[item.index]<50?'green-text':'')}}">
              {{score[item.index]}}åˆ†
            </view>
          </view>
          <view class="month-desc">
            {{item.desc}}
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="hint-box basic-content-box" wx:else>
    <view class="group-box"wx:if="{{state===2}}">
      <view><text style="font-style: italic;">å›¢è´­</text>ä¸­ï¼Œå¾…è§£é”ã€‚</view>
      <view>å‡‘é½4äººå³å¯è§£é”å¹´è¿æŠ¥å‘Š</view>
      <view class="fixed-share-btn">
        <button
            class="fix-btns"
            open-type="share">
            <text>é‚€è¯·å¥½å‹æ‹¼å›¢</text>
        </button>
      </view>
    </view>

    <block wx:for="{{hint}}" wx:key="*this">
      <view class="hint-box-inner">
        <view class="hint-content">
          <view class="hint-title-wrapper">
            <view class="hint-title-box">
              <image
                class="hint-img"
                src="/static/info/icon.png" />
              <text class="hint-title">{{item.title}}</text>
              <image
                class="hint-img"
                src="/static/info/icon.png" />
            </view>
          </view>
          <view class="hint-desc"
            wx:for="{{item.desc}}" wx:for-item="desc" wx:key="*this">
            {{desc}}
          </view>
        </view>
        <view wx:if="{{state===0}}" class="hint-btn"
          catchtap="toPay" data-group="0">
          <image class="lock-logo" src='/static/info/lock.png' background-size="cover"></image>
          <text class="lock-text">è§£é”æŸ¥çœ‹è¯¦æƒ…</text>
        </view>
      </view>
    </block>
    <view class="hint-foot">
      <view class="hint-foot-img-box">
        <image wx:for="{{[0,1,2]}}" wx:key="*this"
          class="hint-foot-img"
          src="/static/info/icon.png" />
      </view>
      <view class="hint-desc">æ„Ÿæƒ…ã€äº‹ä¸šã€è´¢å¯Œã€å¥åº·ã€äººé™…...</view>
      <view class="hint-desc">é€‰æ‹©æ¯”åŠªåŠ›æ›´é‡è¦ï¼Œè¶‹åˆ©é¿å®³ã€é›†ä¸­å‘åŠ›ï¼Œ</view>
      <view class="hint-desc">ç”¨ä¸åˆ°ä¸€æ¯æ˜Ÿå·´å…‹çš„ä»·æ ¼ï¼Œç°åœ¨è§£é”ä½ çš„è¿åŠ¿å¯¼èˆª</view>
    </view>
    <view wx:if="{{state===0}}" class="taiji-box">
      <image class="taiji-logo" src='/static/info/btn.png' background-size="cover"></image>
      <text class="taiji-text">è§£é”æˆ‘çš„å…«å­—è¿åŠ¿</text>
    </view>
    <view wx:if="{{state===0}}" class="fix-btn">
      <view class="pay-btn-box">
        <button
          class="pay-btn"
          catchtap="toPay"
          data-group="0">
          <image class="bt-logo" src='/static/info/lock.png' background-size="cover"></image>
          <text>ç«‹å³è§£é”</text>
          <text>Â¥ {{price.original}}</text>
        </button>
      </view>
      <view class="btn-vertical-line">
      </view>
      <view class="pay-btn-box">
        <button
          class="pay-btn"
          catchtap="toPay"
          data-group="1">
          <image class="bt-logo" src='/static/info/lock.png' background-size="cover"></image>
          <text>æ‹¼å•è§£é”</text>
          <text>Â¥ {{price.discount}}</text>
        </button>
      </view>
    </view>
  </view>
  <!-- åº•æ  -->
  <view class="bottom-bar">
    <!-- å·²è§£é” -->
    <view class="adv-box" wx:if="{{state===1}}">
      <view class="adv-line">å¯¹å¹´è¿æŠ¥å‘Šè¿˜æœ‰ç–‘è™‘ï¼Ÿ</view>
      <view class="adv-line">æƒ³äº†è§£è‡ªå·±ä»Šå¹´è¯¦ç»†è¿åŠ¿ï¼Ÿ</view>
      <view class="adv-line">å¯å…³æ³¨ä¸‹æ–¹XXè¿åŠ¿å¾®ä¿¡å…¬ä¼—å·</view>
      <view class="adv-line">åœ¨å¯¹è¯æ¡†è¾“å…¥ #å¹´è¿</view>
      <view class="adv-line">ä»˜è´¹åå³å¯è·å¾—</view>
      <view class="adv-line">XXè¿åŠ¿é¡¹ç›®</view>
      <template is="foot" />
    </view>
    <!-- å›¢è´­ä¸­ -->
    <template is="foot" wx:elif="{{state===2}}" />
    <!-- æœªä»˜è´¹ -->
    <view wx:else></view>
  </view>
</view>
